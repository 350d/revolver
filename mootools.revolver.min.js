var Revolver,RevolverSlide; Revolver=new Class({Implements:Events,defaults:{rotationSpeed:4E3,autoPlay:!0,transition:{direction:"left",easing:"sine:in:out",speed:500,type:"fade"},slideClass:"slide",onTransitionStart:function(){},onTransitionComplete:function(){},onReady:function(){},onPlay:function(){},onStop:function(){},onPause:function(){},onRestart:function(){}},currentSlide:null,nextSlide:null,numSlides:0,lastSlide:null,container:null,slides:[],iteration:0,intervalId:null,state:null,options:null,dimensions:null,initialize:function(a, b){this.options=Object.merge(this.defaults,b);this.container=a;this.dimensions=this.container.getSize();this.container.getChildren("."+this.options.slideClass).each(function(a){this.addSlide(a)}.bind(this));this.numSlides=this.slides.length;this.currentSlide=0;this.nextSlide=1<this.numSlides?1:0;this.lastSlide=0==this.numSlides?null:this.numSlides-1;this.status={paused:!1,playing:!1,stopped:!0};if(!(1>=this.numSlides))return this.fireEvent("ready"),this.options.autoPlay&&this.play({},!0),this},addSlide:function(a){this.slides.push(new RevolverSlide(a))}, changeStatus:function(a){Object.each(this.status,function(b,d){this.status[d]=d==a},this);return this},transition:function(a){a=Object.merge(Object.clone(this.options.transition),a);this.fireEvent("transitionStart");this.transitions[a.type].bind(this)(a);this.currentSlide=this.nextSlide;this.nextSlide=this.currentSlide==this.lastSlide?0:this.currentSlide+1;this.iteration++;return this},transitions:{none:function(){this.slides[this.currentSlide].hide();this.slides[this.nextSlide].show();this.fireEvent("transitionComplete")}, fade:function(a){var b=this.slides[this.currentSlide],d=this.slides[this.nextSlide],c=new Fx.Tween(b.container,{duration:a.speed,transition:a.easing}),a=new Fx.Tween(nextlide.container,{duration:a.speed,transition:a.easing,onComplete:function(){this.fireEvent("transitionComplete")}});b.show().container.setStyle("opacity",1);c.start("opacity",0);d.show().container.setStyle("opacity",0);a.start("opacity",1)},slide:function(a){var b=this,d=this.slides[this.currentSlide],c=this.slides[this.nextSlide], e=new Fx.Tween(d.container,{duration:a.speed,transition:a.easing,onComplete:function(){b.hide()}}),f=new Fx.Tween(c.container,{duration:a.speed,transition:a.easing,onComplete:function(){this.fireEvent("transitionComplete")}});d.container.setStyles({top:0,left:0});c.show();"up"==a.direction?(c.container.setStyle("top",this.dimensions.y),f.start("top",0),e.start("top",0-this.dimensions.y)):"right"==a.direction?(c.container.setStyle("left",0-this.dimensions.x),f.start("left",0),e.start("left",this.dimensions.x)): "down"==a.direction?(c.container.setStyle("top",0-this.dimensions.y),f.start("top",0),e.start("top",this.dimensions.y)):"left"==a.direction&&(c.container.setStyle("left",this.dimensions.x),f.start("left",0),e.start("left",0-this.dimensions.x))},reveal:function(){this.slides[this.nextSlide].container.setStyle("z-index",this.iteration+1);this.slides[this.nextSlide].container.setStyle("width",0).tween("width",this.dimensions.x)}},play:function(a,b){if(!this.status.playing)this.fireEvent("play").changeStatus("playing"), b||this.transition(a),this.intervalId=setInterval(this.transition.bind(this),parseFloat(this.options.rotationSpeed));return this},pause:function(){if(!this.status.paused&&(this.fireEvent("pause").changeStatus("paused"),null!==this.intervalId))clearInterval(this.intervalId),this.intervalId=null;return this},stop:function(){if(!this.status.stopped&&(this.fireEvent("stop").changeStatus("stopped"),null!==this.intervalId))clearInterval(this.intervalId),this.intervalId=null;return this.reset()},reset:function(){if(0!= this.currentSlide)this.nextSlide=0;return this},restart:function(a){return this.fireEvent("restart").stop().play(a)},first:function(a){return this.goTo(0,a)},previous:function(a){return this.goTo(0===this.currentSlide?this.lastSlide:this.currentSlide-1,a)},goTo:function(a,b){if(a==this.currentSlide)return this;this.nextSlide=a;return this.status.playing?this.pause().play(b):this.transition(b)},next:function(a){return this.goTo(this.nextSlide,a)},last:function(a){return this.goTo(this.lastSlide,a)}}); RevolverSlide=new Class({container:null,initialize:function(a){this.container=a;return this},show:function(){this.container.setStyles({display:"block"});return this},hide:function(){this.container.setStyles({display:"none"});return this}});Elements.implement({revolver:function(a){return this.each(function(b){return new Revolver(b,a)})}});Element.implement({revolver:function(a){return new Revolver(this,a)}});