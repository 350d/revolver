var Revolver,RevolverSlide; Revolver=new Class({Implements:Events,defaults:{rotationSpeed:4E3,autoPlay:!0,transition:{direction:"left",easing:"sine:in:out",speed:1E3,type:"fade"},slideClass:"slide"},currentSlide:null,nextSlide:null,numSlides:0,lastSlide:null,container:null,slides:[],iteration:0,intervalId:null,state:null,options:null,dimensions:null,initialize:function(a,b){this.options=Object.merge(this.defaults,b);this.container=a;this.dimensions=this.container.getSize();this.container.getChildren("."+this.options.slideClass).each(function(a){this.addSlide(a)}.bind(this)); this.numSlides=this.slides.length;this.currentSlide=0;this.nextSlide=1<this.numSlides?1:0;this.lastSlide=0==this.numSlides?null:this.numSlides-1;this.status={paused:!1,playing:!1,stopped:!0};if(1>=this.numSlides)console.log("no slides... bailing out");else return this.options.autoPlay&&this.play({},!0),this},addSlide:function(a){this.slides.push(new RevolverSlide(a,this))},changeStatus:function(a){Object.each(this.status,function(b,c){this.status[c]=c==a},this);return this},transition:function(a){a= Object.merge(Object.clone(this.options.transition),a);this.transitions[a.type].bind(this)(a);this.currentSlide=this.nextSlide;this.nextSlide=this.currentSlide==this.lastSlide?0:this.currentSlide+1;this.iteration++;this.fireEvent("transition");return this},transitions:{none:function(a){this.slides[revolver.currentSlide].hide(a);this.slides[revolver.nextSlide].show(a)},fade:function(a){this.slides[this.currentSlide].fadeOut(a);this.slides[this.nextSlide].fadeIn(a)},slide:function(a){this.slides[this.currentSlide].slideOut(a); this.slides[this.nextSlide].slideIn(a)},reveal:function(){this.slides[this.nextSlide].container.setStyle("z-index",this.iteration+1);this.slides[this.nextSlide].container.setStyle("width",0).morph({width:this.dimensions.width})}},play:function(a,b){if(!this.status.playing)this.changeStatus("playing"),b||this.transition(a),this.intervalId=setInterval(this.transition.bind(this),parseFloat(this.options.rotationSpeed));return this},pause:function(){this.changeStatus("paused");if(null!==this.intervalId)clearInterval(this.intervalId), this.intervalId=null;return this},stop:function(){this.changeStatus("stopped");if(null!==this.intervalId)clearInterval(this.intervalId),this.intervalId=null;return this.reset()},reset:function(){if(0!=this.currentSlide)this.nextSlide=0;return this},restart:function(){return this.stop().play()},first:function(){return this.goTo(0)},previous:function(){var a;switch(this.options.transition.direction){case "up":a="down";break;case "right":a="left";break;case "down":a="up";break;case "left":a="right"}return this.goTo(0=== this.currentSlide?this.lastSlide:this.currentSlide-1,{direction:a})},goTo:function(a,b){if(a==this.currentSlide)return this;this.nextSlide=a;return this.status.playing?this.pause().play(b):this.transition(b)},next:function(){return this.goTo(this.nextSlide)},last:function(){return this.goTo(this.lastSlide)}}); RevolverSlide=new Class({container:null,size:null,initialize:function(a,b){this.container=a;this.size=b.dimensions;this.container.set("morph",{duration:b.options.transition.speed});return this},show:function(){this.container.setStyles({display:"block"});return this},hide:function(){this.container.setStyles({display:"none"});return this},fadeIn:function(a){a=new Fx.Morph(this.container,{duration:a.speed,transition:a.easing});this.show().container.setStyle("opacity",0);a.start({opacity:1})},fadeOut:function(a){a= new Fx.Morph(this.container,{duration:a.speed,transition:a.easing});this.show().container.setStyle("opacity",1);a.start({opacity:0})},slideIn:function(a){var b=new Fx.Morph(this.container,{duration:a.speed,transition:a.easing,onComplete:function(){}});this.show();"up"==a.direction?this.container.setStyle("top",this.size.y):"right"==a.direction?this.container.setStyle("left",0-this.size.x):"down"==a.direction?this.container.setStyle("top",0-this.size.y):"left"==a.direction&&this.container.setStyle("left", this.size.x);b.start({top:0,left:0});return this},slideOut:function(a){var b=this,c=new Fx.Tween(this.container,{duration:a.speed,transition:a.easing,onComplete:function(){b.hide()}});this.container.setStyles({top:0,left:0});"up"==a.direction?c.start("top",0-this.size.y):"right"==a.direction?c.start("left",this.size.x):"down"==a.direction?c.start("top",this.size.y):"left"==a.direction&&c.start("left",0-this.size.x);return this}}); Elements.implement({revolver:function(a){return this.each(function(b){return new Revolver(b,a)})}});Element.implement({revolver:function(a){return new Revolver(this,a)}});